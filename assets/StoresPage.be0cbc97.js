import{aj as k,r as v,ak as f,V as b,t as _,z as V,Y as i,Z as m,_ as t,$ as a,a6 as p,am as g,a0 as h,a1 as w,a3 as $,a4 as x,a5 as B,a7 as I,b9 as N,ap as D,ba as E,aY as L}from"./index.52a3ac9d.js";import{u as q,Q as F}from"./use-quasar.29cd6d4c.js";import{Q as O,a as P,b as U}from"./QList.1401bf9e.js";import{Q as Y}from"./QPage.11f7dd58.js";const j=k("StoreStore",()=>{const c=v([]);return{stores:c,fetchStores:async()=>{try{const e=await f.get("store");c.value=e.data}catch(e){console.error("Error fetching stores:",e)}},saveStore:async e=>{try{return e.id?await f.put(`store/${e.id}`,e):await f.post("store",e),!0}catch(s){return console.error("Error saving store:",s),!1}}}}),G=b({__name:"StoresPage",setup(c){const l=j(),d=q(),e=_(()=>l.stores),s=v(!1),n=v({id:"",name:"",image:null});V(()=>{l.fetchStores()});function y(){n.value={id:"",name:"",image:null},s.value=!0}function Q(u){n.value={...u},s.value=!0}async function C(u){await l.saveStore(u)?(d.notify({message:"Store saved successfully",color:"green"}),s.value=!1,l.fetchStores()):d.notify({message:"Failed to save store",color:"red"})}return(u,o)=>(i(),m(Y,{title:"Stores",style:{"background-color":"#f5f5f5"}},{default:t(()=>{var S;return[a(g,{class:"q-pa-md"},{default:t(()=>[a(p,{color:"primary","icon-right":"add",label:"Create new store","no-caps":"",onClick:y})]),_:1}),((S=e.value)==null?void 0:S.length)>0?(i(),m(O,{key:0,bordered:""},{default:t(()=>[(i(!0),h(B,null,w(e.value,r=>(i(),m(P,{key:r.id,clickable:"",onClick:z=>Q(r)},{default:t(()=>[a(U,null,{default:t(()=>[a(F,null,{default:t(()=>[$(x(r.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):I("",!0),a(L,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=r=>s.value=r)},{default:t(()=>[a(g,null,{default:t(()=>[a(N,null,{default:t(()=>[a(D,{modelValue:n.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>n.value.name=r),label:"Store Name"},null,8,["modelValue"])]),_:1}),a(E,{align:"right"},{default:t(()=>[a(p,{flat:"",label:"Cancel",color:"primary",onClick:o[1]||(o[1]=r=>s.value=!1)}),a(p,{flat:"",label:"Save",color:"primary",onClick:o[2]||(o[2]=r=>C(n.value))})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}});export{G as default};
